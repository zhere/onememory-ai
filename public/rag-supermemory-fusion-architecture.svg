<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="1000" height="800" fill="#f8f9fa" />
  
  <!-- 标题 -->
  <text x="500" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">RAG与Supermemory融合技术架构</text>
  
  <!-- 客户端层 -->
  <rect x="400" y="70" width="200" height="50" rx="5" fill="#e6f7ff" stroke="#1890ff" stroke-width="2" />
  <text x="500" y="100" font-family="Arial" font-size="16" text-anchor="middle">客户端应用</text>
  
  <!-- API网关层 -->
  <rect x="400" y="150" width="200" height="50" rx="5" fill="#e6f7ff" stroke="#1890ff" stroke-width="2" />
  <text x="500" y="180" font-family="Arial" font-size="16" text-anchor="middle">API网关</text>
  
  <!-- 连接线 -->
  <line x1="500" y1="120" x2="500" y2="150" stroke="#1890ff" stroke-width="2" />
  
  <!-- 核心服务层 -->
  <rect x="150" y="250" width="700" height="50" rx="5" fill="#d9f7be" stroke="#52c41a" stroke-width="2" />
  <text x="500" y="280" font-family="Arial" font-size="16" text-anchor="middle">核心服务层</text>
  
  <!-- 连接线 -->
  <line x1="500" y1="200" x2="500" y2="250" stroke="#1890ff" stroke-width="2" />
  
  <!-- RAG系统 -->
  <rect x="100" y="350" width="300" height="200" rx="5" fill="#fff1f0" stroke="#ff4d4f" stroke-width="2" />
  <text x="250" y="370" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">RAG知识检索系统</text>
  
  <!-- RAG内部组件 -->
  <rect x="120" y="390" width="120" height="40" rx="5" fill="#fff" stroke="#ff4d4f" stroke-width="1" />
  <text x="180" y="415" font-family="Arial" font-size="12" text-anchor="middle">知识源管理器</text>
  
  <rect x="260" y="390" width="120" height="40" rx="5" fill="#fff" stroke="#ff4d4f" stroke-width="1" />
  <text x="320" y="415" font-family="Arial" font-size="12" text-anchor="middle">向量数据库</text>
  
  <rect x="120" y="450" width="120" height="40" rx="5" fill="#fff" stroke="#ff4d4f" stroke-width="1" />
  <text x="180" y="475" font-family="Arial" font-size="12" text-anchor="middle">嵌入引擎</text>
  
  <rect x="260" y="450" width="120" height="40" rx="5" fill="#fff" stroke="#ff4d4f" stroke-width="1" />
  <text x="320" y="475" font-family="Arial" font-size="12" text-anchor="middle">相似度检索器</text>
  
  <rect x="190" y="510" width="120" height="30" rx="5" fill="#fff" stroke="#ff4d4f" stroke-width="1" />
  <text x="250" y="530" font-family="Arial" font-size="12" text-anchor="middle">知识库索引</text>
  
  <!-- Supermemory系统 -->
  <rect x="600" y="350" width="300" height="200" rx="5" fill="#f0f5ff" stroke="#2f54eb" stroke-width="2" />
  <text x="750" y="370" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Supermemory系统</text>
  
  <!-- Supermemory内部组件 -->
  <rect x="620" y="390" width="120" height="40" rx="5" fill="#fff" stroke="#2f54eb" stroke-width="1" />
  <text x="680" y="415" font-family="Arial" font-size="12" text-anchor="middle">记忆管理器</text>
  
  <rect x="760" y="390" width="120" height="40" rx="5" fill="#fff" stroke="#2f54eb" stroke-width="1" />
  <text x="820" y="415" font-family="Arial" font-size="12" text-anchor="middle">智能分段器</text>
  
  <rect x="620" y="450" width="120" height="40" rx="5" fill="#fff" stroke="#2f54eb" stroke-width="1" />
  <text x="680" y="475" font-family="Arial" font-size="12" text-anchor="middle">知识图谱存储</text>
  
  <rect x="760" y="450" width="120" height="40" rx="5" fill="#fff" stroke="#2f54eb" stroke-width="1" />
  <text x="820" y="475" font-family="Arial" font-size="12" text-anchor="middle">关系引擎</text>
  
  <rect x="690" y="510" width="120" height="30" rx="5" fill="#fff" stroke="#2f54eb" stroke-width="1" />
  <text x="750" y="530" font-family="Arial" font-size="12" text-anchor="middle">演化引擎</text>
  
  <!-- 连接线 -->
  <line x1="250" y1="300" x2="250" y2="350" stroke="#52c41a" stroke-width="2" />
  <line x1="750" y1="300" x2="750" y2="350" stroke="#52c41a" stroke-width="2" />
  
  <!-- 融合层 -->
  <rect x="150" y="600" width="700" height="120" rx="5" fill="#f9f0ff" stroke="#722ed1" stroke-width="2" />
  <text x="500" y="620" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">融合层</text>
  
  <!-- 融合层内部组件 -->
  <rect x="170" y="640" width="150" height="40" rx="5" fill="#fff" stroke="#722ed1" stroke-width="1" />
  <text x="245" y="665" font-family="Arial" font-size="12" text-anchor="middle">并行检索协调器</text>
  
  <rect x="340" y="640" width="150" height="40" rx="5" fill="#fff" stroke="#722ed1" stroke-width="1" />
  <text x="415" y="665" font-family="Arial" font-size="12" text-anchor="middle">融合策略引擎</text>
  
  <rect x="510" y="640" width="150" height="40" rx="5" fill="#fff" stroke="#722ed1" stroke-width="1" />
  <text x="585" y="665" font-family="Arial" font-size="12" text-anchor="middle">上下文组装器</text>
  
  <rect x="680" y="640" width="150" height="40" rx="5" fill="#fff" stroke="#722ed1" stroke-width="1" />
  <text x="755" y="665" font-family="Arial" font-size="12" text-anchor="middle">洞察生成器</text>
  
  <!-- 融合策略说明 -->
  <rect x="250" y="690" width="500" height="20" rx="5" fill="#fff" stroke="#722ed1" stroke-width="1" />
  <text x="500" y="705" font-family="Arial" font-size="12" text-anchor="middle">融合策略: 加权融合 | 排序融合 | 混合融合</text>
  
  <!-- 连接线 -->
  <line x1="250" y1="550" x2="250" y2="600" stroke="#52c41a" stroke-width="2" />
  <line x1="750" y1="550" x2="750" y2="600" stroke="#52c41a" stroke-width="2" />
  
  <!-- 数据流箭头 -->
  <!-- RAG到融合层 -->
  <line x1="250" y1="570" x2="250" y2="590" stroke="#ff4d4f" stroke-width="2" stroke-dasharray="5,5" />
  <polygon points="250,600 245,590 255,590" fill="#ff4d4f" />
  
  <!-- Supermemory到融合层 -->
  <line x1="750" y1="570" x2="750" y2="590" stroke="#2f54eb" stroke-width="2" stroke-dasharray="5,5" />
  <polygon points="750,600 745,590 755,590" fill="#2f54eb" />
  
  <!-- 融合层到LLM -->
  <rect x="400" y="750" width="200" height="40" rx="5" fill="#fff2e8" stroke="#fa8c16" stroke-width="2" />
  <text x="500" y="775" font-family="Arial" font-size="16" text-anchor="middle">LLM适配器</text>
  
  <line x1="500" y1="720" x2="500" y2="740" stroke="#722ed1" stroke-width="2" />
  <polygon points="500,750 495,740 505,740" fill="#722ed1" />
  
  <!-- 数据库层 -->
  <rect x="50" y="450" width="80" height="80" rx="5" fill="#e6fffb" stroke="#13c2c2" stroke-width="1" />
  <text x="90" y="490" font-family="Arial" font-size="10" text-anchor="middle">外部知识库</text>
  <line x1="100" y1="410" x2="120" y2="410" stroke="#13c2c2" stroke-width="1" />
  
  <rect x="870" y="450" width="80" height="80" rx="5" fill="#e6fffb" stroke="#13c2c2" stroke-width="1" />
  <text x="910" y="490" font-family="Arial" font-size="10" text-anchor="middle">PostgreSQL + pgvector</text>
  <line x1="870" y1="470" x2="850" y2="470" stroke="#13c2c2" stroke-width="1" />
  
  <!-- 图例 -->
  <rect x="800" y="70" width="15" height="15" fill="#fff1f0" stroke="#ff4d4f" stroke-width="1" />
  <text x="820" y="83" font-family="Arial" font-size="12" text-anchor="start">RAG系统</text>
  
  <rect x="800" y="95" width="15" height="15" fill="#f0f5ff" stroke="#2f54eb" stroke-width="1" />
  <text x="820" y="108" font-family="Arial" font-size="12" text-anchor="start">Supermemory系统</text>
  
  <rect x="800" y="120" width="15" height="15" fill="#f9f0ff" stroke="#722ed1" stroke-width="1" />
  <text x="820" y="133" font-family="Arial" font-size="12" text-anchor="start">融合层</text>
</svg>